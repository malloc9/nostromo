class NostromoDashboard{constructor(dataSimulator){this.dataSimulator=dataSimulator,this.refreshInterval=null,this.refreshRate=2500,this.isActive=!1,this.init()}init(){console.log("Dashboard initialized")}activate(){this.isActive=!0,this.render(),this.startRealTimeUpdates(),console.log("Dashboard activated")}deactivate(){this.isActive=!1,this.stopRealTimeUpdates(),console.log("Dashboard deactivated")}startRealTimeUpdates(){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval(()=>{this.isActive&&this.updateData()},this.refreshRate)}stopRealTimeUpdates(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)}render(){const dashboardScreen=document.getElementById("dashboard-screen");if(!dashboardScreen)return void console.error("Dashboard screen element not found");const screenContent=dashboardScreen.querySelector(".screen-content");screenContent?(screenContent.innerHTML=this.generateDashboardHTML(),this.setupSchematicClickHandlers(),this.updateData()):console.error("Dashboard screen content not found")}generateDashboardHTML(){return`\n            <div class="dashboard-container">\n                \x3c!-- Ship Schematic Section --\x3e\n                <div class="ship-schematic-section">\n                    <div class="section-header">NOSTROMO VESSEL STATUS</div>\n                    <div class="ship-schematic">\n                        ${this.generateShipSchematic()}\n                    </div>\n                </div>\n\n                \x3c!-- 4-Quadrant Status Grid --\x3e\n                <div class="status-grid">\n                    \x3c!-- Power Systems Quadrant --\x3e\n                    <div class="status-quadrant" id="power-quadrant">\n                        <div class="quadrant-header">\n                            <span class="quadrant-title">POWER SYSTEMS</span>\n                            <span class="status-indicator" id="power-status">●</span>\n                        </div>\n                        <div class="quadrant-content" id="power-content">\n                            <div class="data-loading">LOADING...</div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Life Support Quadrant --\x3e\n                    <div class="status-quadrant" id="life-support-quadrant">\n                        <div class="quadrant-header">\n                            <span class="quadrant-title">LIFE SUPPORT</span>\n                            <span class="status-indicator" id="life-support-status">●</span>\n                        </div>\n                        <div class="quadrant-content" id="life-support-content">\n                            <div class="data-loading">LOADING...</div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Navigation Quadrant --\x3e\n                    <div class="status-quadrant" id="navigation-quadrant">\n                        <div class="quadrant-header">\n                            <span class="quadrant-title">NAVIGATION</span>\n                            <span class="status-indicator" id="navigation-status">●</span>\n                        </div>\n                        <div class="quadrant-content" id="navigation-content">\n                            <div class="data-loading">LOADING...</div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Crew Status Quadrant --\x3e\n                    <div class="status-quadrant" id="crew-quadrant">\n                        <div class="quadrant-header">\n                            <span class="quadrant-title">CREW STATUS</span>\n                            <span class="status-indicator" id="crew-status">●</span>\n                        </div>\n                        <div class="quadrant-content" id="crew-content">\n                            <div class="data-loading">LOADING...</div>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- System Summary Bar --\x3e\n                <div class="system-summary">\n                    <div class="summary-item">\n                        <span class="summary-label">OVERALL STATUS:</span>\n                        <span class="summary-value" id="overall-status">OPERATIONAL</span>\n                    </div>\n                    <div class="summary-item">\n                        <span class="summary-label">LAST UPDATE:</span>\n                        <span class="summary-value" id="last-update">--:--:--</span>\n                    </div>\n                    <div class="summary-item">\n                        <span class="summary-label">ALERTS:</span>\n                        <span class="summary-value" id="alert-count">0</span>\n                    </div>\n                </div>\n            </div>\n        `}generateShipSchematic(){return'\n            <pre class="ascii-ship">\n╔═══════════════════════════════════╗\n║            NOSTROMO               ║\n║       COMMERCIAL TOWING           ║\n║            VEHICLE                ║\n╠═══════════════════════════════════╣\n║                                   ║\n║   [<span class="system-indicator clickable" data-system="life-support" id="schematic-life-support">LS</span>]      BRIDGE      [<span class="system-indicator clickable" data-system="navigation" id="schematic-navigation">NAV</span>]   ║\n║    │        ┌───┐        │        ║\n║    │   ┌────┤   ├────┐   │        ║\n║    └───┤    │   │    ├───┘        ║\n║        │    └───┘    │            ║\n║        │             │            ║\n║        │   CENTRAL   │            ║\n║        │    CORE     │            ║\n║        │             │            ║\n║    ┌───┤    ┌───┐    ├───┐        ║\n║    │   └────┤   ├────┘   │        ║\n║    │        └───┘        │        ║\n║   [<span class="system-indicator clickable" data-system="engineering" id="schematic-power">PWR</span>]    ENGINE ROOM    [<span class="system-indicator clickable" data-system="crew" id="schematic-crew">CRW</span>]   ║\n║    │     ╔═══════════╗     │       ║\n║    └─────╢ █████████ ╟─────┘       ║\n║          ╢ █████████ ╟             ║\n║          ╚═══════════╝             ║\n║                                   ║\n╚═══════════════════════════════════╝\n            </pre>\n        '}updateData(){if(!this.dataSimulator)return void console.warn("Data simulator not available");const systemData=this.dataSimulator.generateSystemStatus();this.updatePowerQuadrant(systemData.power),this.updateLifeSupportQuadrant(systemData.lifeSupport),this.updateNavigationQuadrant(systemData.navigation),this.updateCrewQuadrant(systemData.crew),this.updateSystemSummary(systemData),this.updateSchematicIndicators(systemData);const lastUpdateElement=document.getElementById("last-update");if(lastUpdateElement){const now=new Date;lastUpdateElement.textContent=now.toTimeString().substring(0,8)}}updatePowerQuadrant(powerData){const content=document.getElementById("power-content"),status=document.getElementById("power-status");if(!content||!status)return;const powerLevel=powerData.generation-powerData.consumption;let statusClass="status-ok";powerLevel<10&&(statusClass="status-warning"),powerLevel<0&&(statusClass="status-critical"),status.className=`status-indicator ${statusClass}`,content.innerHTML=`\n            <div class="data-row">\n                <span class="data-label">GENERATION:</span>\n                <span class="data-value">${powerData.generation.toFixed(1)}%</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">CONSUMPTION:</span>\n                <span class="data-value">${powerData.consumption.toFixed(1)}%</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">NET POWER:</span>\n                <span class="data-value ${powerLevel>=0?"positive":"negative"}">${powerLevel>=0?"+":""}${powerLevel.toFixed(1)}%</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">EFFICIENCY:</span>\n                <span class="data-value">${powerData.efficiency.toFixed(1)}%</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">FUEL LEVEL:</span>\n                <span class="data-value">${powerData.fuel.toFixed(1)}%</span>\n            </div>\n        `}updateLifeSupportQuadrant(lifeSupportData){const content=document.getElementById("life-support-content"),status=document.getElementById("life-support-status");if(!content||!status)return;let statusClass="status-ok";(lifeSupportData.oxygen<90||lifeSupportData.co2>20||lifeSupportData.pressure<.95||lifeSupportData.pressure>1.05)&&(statusClass="status-warning"),(lifeSupportData.oxygen<80||lifeSupportData.co2>30)&&(statusClass="status-critical"),status.className=`status-indicator ${statusClass}`,content.innerHTML=`\n            <div class="data-row">\n                <span class="data-label">OXYGEN:</span>\n                <span class="data-value">${lifeSupportData.oxygen.toFixed(1)}%</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">CO2 LEVEL:</span>\n                <span class="data-value">${lifeSupportData.co2.toFixed(1)} PPM</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">PRESSURE:</span>\n                <span class="data-value">${lifeSupportData.pressure.toFixed(2)} ATM</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">TEMPERATURE:</span>\n                <span class="data-value">${lifeSupportData.temperature.toFixed(1)}°C</span>\n            </div>\n        `}updateNavigationQuadrant(navigationData){const content=document.getElementById("navigation-content"),status=document.getElementById("navigation-status");content&&status&&(status.className="status-indicator status-ok",content.innerHTML=`\n            <div class="data-row">\n                <span class="data-label">POSITION:</span>\n                <span class="data-value">${navigationData.coordinates.x.toFixed(1)}, ${navigationData.coordinates.y.toFixed(1)}</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">HEADING:</span>\n                <span class="data-value">${navigationData.heading.toFixed(1)}°</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">VELOCITY:</span>\n                <span class="data-value">${navigationData.velocity.toFixed(3)} C</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">DESTINATION:</span>\n                <span class="data-value">${navigationData.destination}</span>\n            </div>\n        `)}updateCrewQuadrant(crewData){const content=document.getElementById("crew-content"),status=document.getElementById("crew-status");if(!content||!status)return;const activeCrew=crewData.filter(member=>"active"===member.status).length,restingCrew=crewData.filter(member=>"resting"===member.status).length,totalCrew=crewData.length;let statusClass="status-ok";activeCrew<.6*totalCrew&&(statusClass="status-warning"),activeCrew<.4*totalCrew&&(statusClass="status-critical"),status.className=`status-indicator ${statusClass}`,content.innerHTML=`\n            <div class="data-row">\n                <span class="data-label">TOTAL CREW:</span>\n                <span class="data-value">${totalCrew}</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">ACTIVE:</span>\n                <span class="data-value">${activeCrew}</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">RESTING:</span>\n                <span class="data-value">${restingCrew}</span>\n            </div>\n            <div class="data-row">\n                <span class="data-label">AVG VITALS:</span>\n                <span class="data-value">NOMINAL</span>\n            </div>\n        `}updateSystemSummary(systemData){const overallStatus=document.getElementById("overall-status"),alertCount=document.getElementById("alert-count");if(!overallStatus||!alertCount)return;let alerts=0,overallHealth="OPERATIONAL";const powerLevel=systemData.power.generation-systemData.power.consumption;powerLevel<0?(alerts++,overallHealth="CRITICAL"):powerLevel<10&&(alerts++,"OPERATIONAL"===overallHealth&&(overallHealth="WARNING")),systemData.lifeSupport.oxygen<80||systemData.lifeSupport.co2>30?(alerts++,overallHealth="CRITICAL"):(systemData.lifeSupport.oxygen<90||systemData.lifeSupport.co2>20)&&(alerts++,"OPERATIONAL"===overallHealth&&(overallHealth="WARNING")),overallStatus.textContent=overallHealth,overallStatus.className="summary-value "+("CRITICAL"===overallHealth?"status-critical":"WARNING"===overallHealth?"status-warning":"status-ok"),alertCount.textContent=alerts.toString(),alertCount.className="summary-value "+(alerts>0?"status-warning":"status-ok")}updateSchematicIndicators(systemData){const lsIndicator=document.getElementById("schematic-life-support");if(lsIndicator){let statusClass="status-ok";(systemData.lifeSupport.oxygen<90||systemData.lifeSupport.co2>20)&&(statusClass="status-warning"),(systemData.lifeSupport.oxygen<80||systemData.lifeSupport.co2>30)&&(statusClass="status-critical"),lsIndicator.className=`system-indicator clickable ${statusClass}`}const powerIndicator=document.getElementById("schematic-power");if(powerIndicator){const powerLevel=systemData.power.generation-systemData.power.consumption;let statusClass="status-ok";powerLevel<10&&(statusClass="status-warning"),powerLevel<0&&(statusClass="status-critical"),powerIndicator.className=`system-indicator clickable ${statusClass}`}const navIndicator=document.getElementById("schematic-navigation");navIndicator&&(navIndicator.className="system-indicator clickable status-ok");const crewIndicator=document.getElementById("schematic-crew");if(crewIndicator){const activeCrew=systemData.crew.filter(member=>"active"===member.status).length,totalCrew=systemData.crew.length;let statusClass="status-ok";activeCrew<.6*totalCrew&&(statusClass="status-warning"),activeCrew<.4*totalCrew&&(statusClass="status-critical"),crewIndicator.className=`system-indicator clickable ${statusClass}`}}setupSchematicClickHandlers(){document.querySelectorAll(".system-indicator.clickable").forEach(indicator=>{indicator.addEventListener("click",event=>{const system=event.target.dataset.system;system&&window.router&&window.router.goTo(system)})})}}"undefined"!=typeof module&&module.exports?module.exports=NostromoDashboard:window.NostromoDashboard=NostromoDashboard;