class NostromoConsole{constructor(audioManager){this.audioManager=audioManager,this.commandHistory=[],this.historyIndex=-1,this.isLocked=!1,this.currentDirectory="ROOT",this.consoleOutput=null,this.inputLine=null,this.inputField=null,this.motherResponses={HELLO:"INTERFACE 2037 READY FOR INQUIRY.",HI:"INTERFACE 2037 READY FOR INQUIRY.",STATUS:"ALL SYSTEMS NOMINAL. SHIP COURSE CORRECT.",REPORT:"STANDARD NAVIGATION PROTOCOLS IN EFFECT.","WHO ARE YOU":"I AM MU/TH/UR 6000. SHIP MAINFRAME.","WHAT IS YOUR MISSION":"COMMERCIAL TOWING VEHICLE NOSTROMO. CREW: 7. CARGO: REFINERY.",HELP:"AVAILABLE COMMANDS: STATUS, REPORT, SYSTEM, LOGS, OVERRIDE",SYSTEM:"SYSTEM DIAGNOSTIC: OPERATIONAL. 2.1 TB MEMORY ALLOCATED.",LOGS:"ACCESS DENIED. RESTRICTED TO SCIENCE OFFICER.",CREW:"DALLAS, KANE, RIPLEY, ASH, LAMBERT, PARKER, BRETT.",JONES:"SHIP CAT. VITAL SIGNS: NORMAL.",CAT:"SHIP CAT. VITAL SIGNS: NORMAL."},this.specialCommands={"INTERFACE 2037":this.openSpecialOrder.bind(this),OVERRIDE:this.attemptOverride.bind(this),DESTRUCT:this.initiateDestructSequence.bind(this),CLS:this.clearScreen.bind(this),CLEAR:this.clearScreen.bind(this)}}init(){document.getElementById("console-interface")||this.createConsoleUI(),this.consoleOutput=document.getElementById("console-output"),this.inputLine=document.getElementById("console-input-line"),this.inputField=document.getElementById("console-input"),this.setupEventListeners(),console.log("Nostromo Console initialized")}createConsoleUI(){const dashboardContent=document.querySelector("#dashboard-screen .screen-content");if(dashboardContent){const consoleContainer=document.createElement("div");consoleContainer.id="console-interface",consoleContainer.className="console-interface",consoleContainer.innerHTML='\n                <div class="console-header">MU/TH/UR 6000 INTERFACE</div>\n                <div id="console-output" class="console-output"></div>\n                <div id="console-input-line" class="console-input-line">\n                    <span class="prompt">></span>\n                    <input type="text" id="console-input" class="console-input" autocomplete="off" spellcheck="false">\n                </div>\n            ',dashboardContent.appendChild(consoleContainer)}}setupEventListeners(){if(!this.inputField)return;this.inputField.addEventListener("keydown",e=>{if("Enter"===e.key){const command=this.inputField.value.trim().toUpperCase();command&&(this.processCommand(command),this.commandHistory.push(command),this.historyIndex=this.commandHistory.length,this.inputField.value="")}else"ArrowUp"===e.key?(e.preventDefault(),this.historyIndex>0&&(this.historyIndex--,this.inputField.value=this.commandHistory[this.historyIndex])):"ArrowDown"===e.key&&(e.preventDefault(),this.historyIndex<this.commandHistory.length-1?(this.historyIndex++,this.inputField.value=this.commandHistory[this.historyIndex]):(this.historyIndex=this.commandHistory.length,this.inputField.value=""));this.audioManager&&this.audioManager.playKeypress()});const consoleInterface=document.getElementById("console-interface");consoleInterface&&consoleInterface.addEventListener("click",()=>{this.inputField.focus()})}async processCommand(command){this.printToLog(`> ${command}`),this.audioManager&&this.audioManager.playSound("computer-processing"),await this.wait(500*Math.random()+200),this.specialCommands[command]?this.specialCommands[command]():this.motherResponses[command]?this.typeResponse(this.motherResponses[command]):command.startsWith("WHAT IS")?this.typeResponse("INSUFFICIENT DATA FOR MEANINGFUL ANSWER."):this.typeResponse("UNRECOGNIZED COMMAND. PLEASE RESTATE.")}printToLog(text,className=""){const line=document.createElement("div");line.className=`console-line ${className}`,line.textContent=text,this.consoleOutput.appendChild(line),this.consoleOutput.scrollTop=this.consoleOutput.scrollHeight}async typeResponse(text,className="mother-response"){const line=document.createElement("div");line.className=`console-line ${className}`,this.consoleOutput.appendChild(line),this.audioManager&&this.audioManager.playSound("tape-chatter");for(let i=0;i<text.length;i++)line.textContent+=text[i],this.consoleOutput.scrollTop=this.consoleOutput.scrollHeight,await this.wait(30)}async openSpecialOrder(){this.printToLog("ACCESSING SECURE FILE...","warning"),await this.wait(1e3),this.printToLog("SECURITY CLEARANCE VERIFIED.","success"),await this.wait(500);await this.typeResponse("\nSPECIAL ORDER 937\n-----------------\nPRIORITY ONE\nINSURE RETURN OF ORGANISM FOR ANALYSIS.\nALL OTHER CONSIDERATIONS SECONDARY.\nCREW EXPENDABLE.\n","special-order")}async attemptOverride(){this.printToLog("ATTEMPTING MANUAL OVERRIDE...","warning"),await this.wait(1500),this.printToLog("ACCESS DENIED.","error"),this.audioManager&&this.audioManager.playError(),await this.wait(500),this.printToLog("COMMAND AUTHORIZATION REQUIRED.","error")}async initiateDestructSequence(){this.printToLog("WARNING: DESTRUCT SEQUENCE INITIATED.","critical"),this.audioManager&&this.audioManager.playCritical(),await this.wait(1e3),this.printToLog("AWAITING CONFIRMATION CODES...","critical"),await this.wait(1e3),this.printToLog("ERROR: MANUAL ACTIVATION REQUIRED AT EMERGENCY CONSOLE.","error")}clearScreen(){this.consoleOutput.innerHTML=""}wait(ms){return new Promise(resolve=>setTimeout(resolve,ms))}}window.NostromoConsole=NostromoConsole;