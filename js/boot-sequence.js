class NostromoBootSequence{constructor(){this.bootMessages=["INITIALIZING MU/TH/UR 6000 MAINFRAME...","LOADING SHIP SYSTEM PROTOCOLS...","ESTABLISHING SENSOR NETWORK...","CONNECTING TO NAVIGATION ARRAY...","ACTIVATING CREW MONITORING...","RUNNING SYSTEM DIAGNOSTICS...","ALL SYSTEMS NOMINAL"],this.diagnosticMessages=["CPU: MU/TH/UR 6000 SERIES - OK","MEMORY: 2048KB AVAILABLE - OK","STORAGE: MAGNETIC TAPE DRIVES - OK","NETWORK: SHIP SYSTEMS ONLINE - OK","SENSORS: ALL ARRAYS RESPONDING - OK","POWER: FUSION REACTOR STABLE - OK"],this.isBooting=!1,this.bootComplete=!1,this.typingSpeed=20,this.messageDelay=800,this.currentMessageIndex=0,this.init()}init(){console.log("Boot sequence system initialized")}async startBootSequence(){if(!this.isBooting&&!this.bootComplete){this.isBooting=!0;try{this.showBootScreen(),await this.runBootMessages(),await this.runDiagnostics(),this.showReadyPrompt(),this.bootComplete=!0}catch(error){console.error("Boot sequence error:",error),this.handleBootError()}finally{this.isBooting=!1}}}showBootScreen(){const bootScreen=document.getElementById("boot-screen");if(document.querySelectorAll(".screen").forEach(screen=>{screen.classList.remove("active")}),bootScreen){bootScreen.classList.add("active");const messagesContainer=bootScreen.querySelector(".boot-messages");messagesContainer&&(messagesContainer.innerHTML="")}}async runBootMessages(){const messagesContainer=document.querySelector(".boot-messages");if(messagesContainer)for(let i=0;i<this.bootMessages.length;i++){const message=this.bootMessages[i],messageElement=document.createElement("div");messageElement.className="boot-line",messageElement.style.opacity="0",messagesContainer.appendChild(messageElement),await this.wait(100),messageElement.style.opacity="1",await this.typeMessage(messageElement,message),await this.wait(this.messageDelay),i<this.bootMessages.length-1&&(messageElement.style.opacity="0",await this.wait(150),messageElement.remove())}}async runDiagnostics(){const messagesContainer=document.querySelector(".boot-messages");if(!messagesContainer)return;messagesContainer.innerHTML="";const headerElement=document.createElement("div");headerElement.className="boot-line diagnostic-header",headerElement.style.opacity="0",messagesContainer.appendChild(headerElement),await this.wait(100),headerElement.style.opacity="1",await this.typeMessage(headerElement,"RUNNING SYSTEM DIAGNOSTICS..."),await this.wait(500);for(let i=0;i<this.diagnosticMessages.length;i++){const diagnostic=this.diagnosticMessages[i],diagElement=document.createElement("div");diagElement.className="boot-line diagnostic-line",diagElement.style.opacity="0",messagesContainer.appendChild(diagElement),await this.wait(150),diagElement.style.opacity="1",await this.typeMessage(diagElement,diagnostic),await this.wait(250)}await this.wait(500),messagesContainer.innerHTML=""}async showReadyPrompt(){const messagesContainer=document.querySelector(".boot-messages");if(!messagesContainer)return;const promptElement=document.createElement("div");promptElement.className="boot-line",promptElement.style.opacity="0",messagesContainer.appendChild(promptElement),await this.wait(250),promptElement.style.opacity="1",await this.typeMessage(promptElement,"SYSTEM READY - PRESS ANY KEY TO CONTINUE");const cursor=document.createElement("span");cursor.className="cursor",cursor.textContent="_",cursor.style.marginLeft="10px",promptElement.appendChild(cursor),setInterval(()=>{cursor.style.opacity="0"===cursor.style.opacity?"1":"0"},500)}async typeMessage(element,message){element.textContent="";for(let i=0;i<message.length;i++)element.textContent+=message[i],await this.wait(this.typingSpeed)}handleBootError(){const messagesContainer=document.querySelector(".boot-messages");messagesContainer&&(messagesContainer.innerHTML='\n            <div class="boot-line error-message">\n                SYSTEM ERROR - BOOT SEQUENCE FAILED\n            </div>\n            <div class="boot-prompt">\n                <span class="prompt-text">PRESS ANY KEY TO RETRY</span>\n                <span class="cursor">_</span>\n            </div>\n        ')}completeBootSequence(){if(!this.bootComplete)return!1;const bootScreen=document.getElementById("boot-screen");return!(!bootScreen||!bootScreen.classList.contains("active"))&&(bootScreen.style.opacity="0",setTimeout(()=>{bootScreen.classList.remove("active"),bootScreen.style.opacity="1",window.router&&window.router.navigateTo("dashboard",!0)},250),!0)}showLoadingScreen(message="LOADING SYSTEM...",duration=2e3){return new Promise(resolve=>{const loadingOverlay=document.getElementById("loading-overlay"),loadingText=document.querySelector(".loading-text");loadingOverlay&&loadingText?(loadingText.textContent=message,loadingOverlay.classList.add("active"),setTimeout(()=>{loadingOverlay.classList.remove("active"),resolve()},duration)):resolve()})}async showTransitionMessage(fromScreen,toScreen){const messages=[`DISCONNECTING FROM ${fromScreen.toUpperCase()}...`,`ESTABLISHING CONNECTION TO ${toScreen.toUpperCase()}...`,`${toScreen.toUpperCase()} SYSTEM READY`];for(const message of messages)await this.showLoadingScreen(message,800)}wait(ms){return new Promise(resolve=>setTimeout(resolve,ms))}reset(){this.isBooting=!1,this.bootComplete=!1,this.currentMessageIndex=0;const bootScreen=document.getElementById("boot-screen");if(bootScreen){const messagesContainer=bootScreen.querySelector(".boot-messages");messagesContainer&&(messagesContainer.innerHTML="")}}shouldShowBootSequence(){return sessionStorage.removeItem("nostromo-boot-seen"),!0}markBootSequenceComplete(){sessionStorage.setItem("nostromo-boot-seen","true")}}window.NostromoBootSequence=NostromoBootSequence;